<script>
    // --- UI State Management ---
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const sidebar = document.querySelector('.sidebar');
    const paymentMethods = document.querySelectorAll('.payment-method');
    const paymentDetails = document.getElementById('payment-details');
    const accountLabel = document.getElementById('account-label');

    // Toggle Mobile Sidebar
    mobileMenuBtn.addEventListener('click', () => {
        sidebar.classList.toggle('active');
    });

    // Handle Payment Method Selection
    paymentMethods.forEach(method => {
        method.addEventListener('click', () => {
            paymentMethods.forEach(m => m.classList.remove('selected'));
            method.classList.add('selected');
            
            const selectedType = method.dataset.method;
            paymentDetails.style.display = 'block';
            
            // Update labels based on selection
            if (selectedType === 'bank') {
                accountLabel.innerText = 'IBAN / Account Number';
            } else {
                accountLabel.innerText = 'Mobile Number';
            }
        });
    });

    // --- Password Validation Logic ---
    const passwordInput = document.getElementById('new-password');
    const strengthBar = document.getElementById('password-strength');
    
    passwordInput.addEventListener('input', () => {
        const val = passwordInput.value;
        let strength = 0;
        
        const requirements = {
            length: val.length >= 8,
            uppercase: /[A-Z]/.test(val),
            lowercase: /[a-z]/.test(val),
            number: /[0-9]/.test(val),
            special: /[^A-Za-z0-9]/.test(val)
        };

        // Update UI requirements checklist
        Object.keys(requirements).forEach(req => {
            const el = document.getElementById(`req-${req}`);
            if (requirements[req]) {
                el.classList.add('met');
                el.classList.remove('unmet');
                el.querySelector('i').className = 'fas fa-check-circle';
                strength++;
            } else {
                el.classList.add('unmet');
                el.classList.remove('met');
                el.querySelector('i').className = 'fas fa-circle';
            }
        });

        // Update Strength Bar color
        strengthBar.className = 'password-strength';
        if (strength < 3) strengthBar.classList.add('weak');
        else if (strength < 5) strengthBar.classList.add('medium');
        else strengthBar.classList.add('strong');
    });

    // --- Notification Helper ---
    function showNotification(message, type = 'success') {
        const notification = document.createElement('div');
        notification.className = `notification ${type} show`;
        notification.innerHTML = `
            <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
            <span>${message}</span>
        `;
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }

    // --- Mock Save Actions ---
    document.getElementById('save-profile').addEventListener('click', () => {
        showNotification('Profile updated successfully!');
    });

    document.getElementById('save-payment').addEventListener('click', () => {
        showNotification('Payment details saved!');
    });

    document.getElementById('change-password').addEventListener('click', () => {
        const pass = document.getElementById('new-password').value;
        const confirm = document.getElementById('confirm-password').value;
        
        if (pass !== confirm) {
            showNotification('Passwords do not match!', 'error');
            return;
        }
        showNotification('Password changed successfully!');
    });
</script>
