<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coin Pop Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .coin-balance-header {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 20px;
            border-radius: 15px;
            margin: 20px auto;
            max-width: 800px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255, 215, 0, 0.3);
        }

        .balance-amount {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .game-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .game-header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        .game-area {
            position: relative;
            height: 500px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            overflow: hidden;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .coin {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 
                0 5px 15px rgba(0, 0, 0, 0.3),
                inset 0 -5px 10px rgba(0, 0, 0, 0.3),
                inset 0 5px 10px rgba(255, 255, 255, 0.4);
            border: 3px solid;
            transition: transform 0.1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            user-select: none;
            animation: float 1s ease-in-out infinite;
        }

        /* Different coin colors */
        .coin-gold {
            background: radial-gradient(circle at 30% 30%, #FFD700, #FFA500);
            border-color: #DAA520;
            color: #8B6914;
        }

        .coin-silver {
            background: radial-gradient(circle at 30% 30%, #C0C0C0, #A0A0A0);
            border-color: #808080;
            color: #505050;
        }

        .coin-bronze {
            background: radial-gradient(circle at 30% 30%, #CD7F32, #8B4513);
            border-color: #654321;
            color: #4A2C1D;
        }

        .coin-ruby {
            background: radial-gradient(circle at 30% 30%, #FF6B6B, #EE5A24);
            border-color: #C44569;
            color: #8B0000;
        }

        .coin-sapphire {
            background: radial-gradient(circle at 30% 30%, #4FC3F7, #0288D1);
            border-color: #01579B;
            color: #003B6F;
        }

        .coin-emerald {
            background: radial-gradient(circle at 30% 30%, #66BB6A, #2E7D32);
            border-color: #1B5E20;
            color: #0A3D0A;
        }

        .coin-amethyst {
            background: radial-gradient(circle at 30% 30%, #BA68C8, #7B1FA2);
            border-color: #4A148C;
            color: #2D004D;
        }

        .coin-diamond {
            background: radial-gradient(circle at 30% 30%, #E0F7FA, #80DEEA);
            border-color: #00ACC1;
            color: #006978;
            animation: diamondGlow 2s ease-in-out infinite;
        }

        .coin::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 20%;
            width: 20%;
            height: 20%;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            filter: blur(2px);
        }

        .coin:hover {
            transform: scale(1.15);
        }

        .coin-pop {
            animation: pop 0.2s ease-out;
        }

        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.4); }
            100% { transform: scale(0); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-8px) rotate(5deg); }
        }

        @keyframes diamondGlow {
            0%, 100% { 
                box-shadow: 
                    0 5px 15px rgba(0, 0, 0, 0.3),
                    inset 0 -5px 10px rgba(0, 0, 0, 0.3),
                    inset 0 5px 10px rgba(255, 255, 255, 0.4),
                    0 0 20px rgba(224, 247, 250, 0.5);
            }
            50% { 
                box-shadow: 
                    0 5px 15px rgba(0, 0, 0, 0.3),
                    inset 0 -5px 10px rgba(0, 0, 0, 0.3),
                    inset 0 5px 10px rgba(255, 255, 255, 0.4),
                    0 0 40px rgba(224, 247, 250, 0.8);
            }
        }

        .level-info {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .progress-container {
            width: 100%;
            height: 12px;
            background: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #059669);
            border-radius: 10px;
            transition: width 0.2s ease;
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 1s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }

        .floating-text {
            position: absolute;
            font-weight: bold;
            font-size: 1.2rem;
            color: #f59e0b;
            pointer-events: none;
            z-index: 100;
            animation: floatUp 1s ease-out forwards;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-80px) scale(1.3);
                opacity: 0;
            }
        }

        .level-up {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            z-index: 1000;
        }

        .level-up.active {
            animation: levelUpPopup 1.5s ease-out;
        }

        @keyframes levelUpPopup {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .reward-coin {
            font-size: 3rem;
            color: #f59e0b;
            margin: 10px 0;
        }

        .game-title {
            text-align: center;
            color: white;
            margin-bottom: 10px;
            font-size: 2rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .combo-display {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
            color: #7c3aed;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .speed-indicator {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 12px;
            border-radius: 10px;
            font-weight: bold;
            color: #e11d48;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Coin Balance Header -->
    <div class="coin-balance-header">
        <div class="text-sm text-gray-600 mb-1">TOTAL COINS EARNED</div>
        <div class="balance-amount" id="totalCoinsBalance">0.00</div>
        <div class="text-xs text-gray-500 mt-1">Keep popping coins to earn more!</div>
    </div>

    <div class="game-container">
        <h1 class="game-title">🎯 Floating Coin Pop Game</h1>
        
        <div class="game-header">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="current-level">1</div>
                    <div class="stat-label">Current Level</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="coins-collected">0</div>
                    <div class="stat-label">Coins Collected</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="coins-per-level">0.25</div>
                    <div class="stat-label">Coins/Level</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="coins-per-minute">0</div>
                    <div class="stat-label">Coins/Min</div>
                </div>
            </div>

            <div class="level-info">
                <div class="flex justify-between items-center mb-2">
                    <span class="font-semibold">Level Progress</span>
                    <span id="progress-text">0/10 coins</span>
                </div>
                <div class="progress-container">
                    <div id="level-progress" class="progress-bar" style="width: 0%"></div>
                </div>
                <div class="text-sm text-gray-600 mt-2">
                    Complete each level to earn <span class="font-bold text-green-600">0.25 coins</span>
                </div>
            </div>
        </div>

        <div class="game-area" id="gameArea">
            <div class="speed-indicator">
                ⚡ 3x SPEED
            </div>
            <div class="combo-display" id="comboDisplay" style="display: none;">
                Combo: <span id="comboCount">0</span>x
            </div>
            <!-- Coins will be generated here -->
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="startGame()">
                <i class="fas fa-play"></i> Start Game
            </button>
            <button class="btn btn-success" onclick="addCoins(8)">
                <i class="fas fa-plus"></i> Add 8 Coins
            </button>
            <button class="btn btn-primary" onclick="resetGame()">
                <i class="fas fa-redo"></i> Reset Game
            </button>
        </div>
    </div>

    <div class="level-up" id="levelUpPopup">
        <div class="reward-coin">🪙</div>
        <h3 class="text-xl font-bold text-gray-800">Level Complete!</h3>
        <p class="text-green-600 font-semibold">+0.25 coins earned!</p>
        <p class="text-gray-600 mt-2">Great job! Keep popping coins!</p>
    </div>

    <script>
        class CoinPopGame {
            constructor() {
                this.currentLevel = 1;
                this.coinsCollected = 0;
                this.totalCoins = 0;
                this.coinsPerLevel = 0.25;
                this.coinsToNextLevel = 10;
                this.gameActive = false;
                this.coinInterval = null;
                this.comboCount = 0;
                this.lastCoinTime = 0;
                this.comboTimeout = null;
                this.coinsPerMinute = 0;
                this.startTime = null;
                this.coinsGenerated = 0;
                
                this.coinTypes = [
                    'coin-gold', 'coin-silver', 'coin-bronze',
                    'coin-ruby', 'coin-sapphire', 'coin-emerald',
                    'coin-amethyst', 'coin-diamond'
                ];
                
                this.initializeGame();
            }

            initializeGame() {
                this.updateUI();
                this.loadGameState();
            }

            startGame() {
                if (this.gameActive) return;
                
                this.gameActive = true;
                this.startTime = Date.now();
                this.coinsGenerated = 0;
                this.clearAllCoins();
                this.generateInitialCoins();
                this.startCoinGeneration();
                
                // Hide combo display initially
                document.getElementById('comboDisplay').style.display = 'none';
            }

            generateInitialCoins() {
                for (let i = 0; i < 8; i++) { // More initial coins for faster gameplay
                    this.createCoin();
                }
            }

            startCoinGeneration() {
                // 3x faster coin generation (every 0.7 seconds instead of 2 seconds)
                this.coinInterval = setInterval(() => {
                    if (this.gameActive) {
                        this.createCoin();
                        this.coinsGenerated++;
                        this.updateCoinsPerMinute();
                    }
                }, 700);
            }

            updateCoinsPerMinute() {
                if (this.startTime) {
                    const minutesElapsed = (Date.now() - this.startTime) / (1000 * 60);
                    this.coinsPerMinute = minutesElapsed > 0 ? (this.coinsGenerated / minutesElapsed) : 0;
                    this.updateUI();
                }
            }

            createCoin() {
                const gameArea = document.getElementById('gameArea');
                const coin = document.createElement('div');
                
                // Random coin type
                const coinType = this.coinTypes[Math.floor(Math.random() * this.coinTypes.length)];
                coin.className = `coin ${coinType}`;
                
                // Random position within game area
                const maxX = gameArea.clientWidth - 50;
                const maxY = gameArea.clientHeight - 50;
                const x = Math.floor(Math.random() * maxX);
                const y = Math.floor(Math.random() * maxY);
                
                coin.style.left = `${x}px`;
                coin.style.top = `${y}px`;
                
                // Faster floating animation
                coin.style.animationDuration = '0.8s';
                
                // Add click event
                coin.addEventListener('click', () => this.popCoin(coin));
                
                gameArea.appendChild(coin);

                // Auto-remove coins after 4 seconds (faster cleanup)
                setTimeout(() => {
                    if (coin.parentNode) {
                        coin.remove();
                    }
                }, 4000);
            }

            popCoin(coin) {
                if (!this.gameActive) return;

                // Add pop animation
                coin.classList.add('coin-pop');
                
                // Update combo
                this.updateCombo();
                
                // Update coins collected
                this.coinsCollected++;
                
                // Create floating text
                this.createFloatingText(coin, '+1');
                
                // Check for level completion
                if (this.coinsCollected >= this.coinsToNextLevel) {
                    this.completeLevel();
                }
                
                // Remove coin after animation (faster)
                setTimeout(() => {
                    coin.remove();
                }, 200);
                
                this.updateUI();
                this.saveGameState();
            }

            updateCombo() {
                const now = Date.now();
                if (now - this.lastCoinTime < 1500) { // Faster combo window (1.5 seconds)
                    this.comboCount++;
                } else {
                    this.comboCount = 1;
                }
                
                this.lastCoinTime = now;
                
                // Show combo display
                const comboDisplay = document.getElementById('comboDisplay');
                const comboCount = document.getElementById('comboCount');
                comboDisplay.style.display = 'block';
                comboCount.textContent = this.comboCount;
                
                // Reset combo timeout (faster)
                clearTimeout(this.comboTimeout);
                this.comboTimeout = setTimeout(() => {
                    comboDisplay.style.display = 'none';
                    this.comboCount = 0;
                }, 1500);
            }

            completeLevel() {
                // Award coins
                this.totalCoins += this.coinsPerLevel;
                
                // Level up
                this.currentLevel++;
                this.coinsCollected = 0;
                this.coinsToNextLevel = Math.floor(10 + (this.currentLevel * 1.5)); // Slightly less difficulty increase
                
                // Show level up popup
                this.showLevelUpPopup();
                
                // Clear all existing coins
                this.clearAllCoins();
                
                // Generate new coins
                this.generateInitialCoins();
            }

            showLevelUpPopup() {
                const popup = document.getElementById('levelUpPopup');
                popup.classList.add('active');
                
                setTimeout(() => {
                    popup.classList.remove('active');
                }, 1500); // Faster popup
            }

            createFloatingText(element, text) {
                const rect = element.getBoundingClientRect();
                const floatingText = document.createElement('div');
                
                floatingText.className = 'floating-text';
                floatingText.textContent = text;
                floatingText.style.left = `${rect.left + rect.width/2}px`;
                floatingText.style.top = `${rect.top}px`;
                
                document.body.appendChild(floatingText);
                
                // Remove after animation (faster)
                setTimeout(() => {
                    floatingText.remove();
                }, 1000);
            }

            clearAllCoins() {
                const gameArea = document.getElementById('gameArea');
                const coins = gameArea.querySelectorAll('.coin');
                coins.forEach(coin => coin.remove());
            }

            addCoins(count) {
                for (let i = 0; i < count; i++) {
                    this.createCoin();
                }
            }

            resetGame() {
                this.gameActive = false;
                clearInterval(this.coinInterval);
                
                this.currentLevel = 1;
                this.coinsCollected = 0;
                this.totalCoins = 0;
                this.coinsToNextLevel = 10;
                this.comboCount = 0;
                this.coinsPerMinute = 0;
                
                this.clearAllCoins();
                this.updateUI();
                this.saveGameState();
                
                document.getElementById('comboDisplay').style.display = 'none';
            }

            updateUI() {
                document.getElementById('current-level').textContent = this.currentLevel;
                document.getElementById('coins-collected').textContent = this.coinsCollected;
                document.getElementById('totalCoinsBalance').textContent = this.totalCoins.toFixed(2);
                document.getElementById('coins-per-level').textContent = this.coinsPerLevel.toFixed(2);
                document.getElementById('coins-per-minute').textContent = Math.round(this.coinsPerMinute);
                
                const progressPercent = (this.coinsCollected / this.coinsToNextLevel) * 100;
                document.getElementById('level-progress').style.width = `${progressPercent}%`;
                document.getElementById('progress-text').textContent = 
                    `${this.coinsCollected}/${this.coinsToNextLevel} coins`;
            }

            saveGameState() {
                const gameState = {
                    currentLevel: this.currentLevel,
                    coinsCollected: this.coinsCollected,
                    totalCoins: this.totalCoins,
                    coinsToNextLevel: this.coinsToNextLevel
                };
                localStorage.setItem('coinPopGameState', JSON.stringify(gameState));
            }

            loadGameState() {
                const savedState = localStorage.getItem('coinPopGameState');
                if (savedState) {
                    const state = JSON.parse(savedState);
                    this.currentLevel = state.currentLevel || 1;
                    this.coinsCollected = state.coinsCollected || 0;
                    this.totalCoins = state.totalCoins || 0;
                    this.coinsToNextLevel = state.coinsToNextLevel || 10;
                    this.updateUI();
                }
            }
        }

        // Initialize game
        let game;

        document.addEventListener('DOMContentLoaded', () => {
            game = new CoinPopGame();
        });

        // Global functions for buttons
        function startGame() {
            game.startGame();
        }

        function addCoins(count) {
            game.addCoins(count);
        }

        function resetGame() {
            game.resetGame();
        }

        // Auto-save when leaving page
        window.addEventListener('beforeunload', () => {
            if (game) {
                game.saveGameState();
            }
        });
    </script>
</body>
</html>
