<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard - Coin Pop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --secondary: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1f2937;
            --light: #f9fafb;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background-color: #f3f4f6;
            color: #1f2937;
        }
        
        .sidebar {
            background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            width: 280px;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        
        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-nav {
            padding: 1rem 0;
            flex-grow: 1;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            padding: 0.75rem 1.5rem;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.2s ease;
            border-left: 4px solid transparent;
        }
        
        .nav-link:hover, .nav-link.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border-left-color: white;
        }
        
        .nav-link svg {
            margin-right: 0.75rem;
            width: 1.25rem;
            height: 1.25rem;
        }
        
        .sidebar-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .content-header {
            background-color: white;
            padding: 1.5rem 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            padding: 1.5rem;
            border-radius: 0.75rem;
            color: white;
            display: flex;
            flex-direction: column;
        }
        
        .stat-card.primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        }
        
        .stat-card.success {
            background: linear-gradient(135deg, var(--secondary) 0%, #059669 100%);
        }
        
        .stat-card.warning {
            background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%);
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .badge-success {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .badge-warning {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .badge-danger {
            background-color: #fee2e2;
            color: #991b1b;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            outline: none;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #e5e7eb;
            margin-bottom: 1.5rem;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            font-weight: 500;
            color: #6b7280;
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .leaderboard-hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 2rem;
            border-radius: 1rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .leaderboard-hero::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }
        
        .leaderboard-hero::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 150px;
            height: 150px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(-30%, 30%);
        }
        
        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            transition: all 0.2s ease;
        }
        
        .leaderboard-item:hover {
            background-color: #f9fafb;
        }
        
        .leaderboard-item.current-user {
            background-color: rgba(79, 70, 229, 0.05);
            border-left: 4px solid var(--primary);
        }
        
        .rank-badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 1rem;
            flex-shrink: 0;
        }
        
        .rank-1 {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #92400e;
        }
        
        .rank-2 {
            background: linear-gradient(135deg, #C0C0C0 0%, #A0A0A0 100%);
            color: #374151;
        }
        
        .rank-3 {
            background: linear-gradient(135deg, #CD7F32 0%, #A66D29 100%);
            color: #7c2d12;
        }
        
        .rank-other {
            background-color: #f3f4f6;
            color: #6b7280;
        }
        
        .player-info {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .player-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            margin-right: 1rem;
        }
        
        .player-name {
            font-weight: 600;
            color: #1f2937;
        }
        
        .player-email {
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .coins-count {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.125rem;
        }
        
        .coins-icon {
            color: #f59e0b;
            margin-right: 0.5rem;
        }
        
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .search-box {
            position: relative;
            margin-bottom: 1.5rem;
        }
        
        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: all 0.2s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        
        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
        }
        
        .time-filter {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .time-filter-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
        }
        
        .time-filter-btn.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: fixed;
                height: 100%;
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .mobile-menu-btn {
                display: flex;
            }
            
            .content-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .leaderboard-item {
                padding: 1rem;
            }
            
            .player-email {
                display: none;
            }
        }
    </style>
</head>
<body class="antialiased flex flex-col min-h-screen bg-gray-100">
    <div id="app-container" class="w-full flex-grow flex">
        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="mobile-menu-btn">
            <i class="fas fa-bars"></i>
        </button>

        <!-- Sidebar -->
        <aside class="sidebar flex flex-col">
            <div class="sidebar-header">
                <a href="dashboard.html" class="text-2xl font-bold text-white flex items-center">
                    <i class="fas fa-coins mr-2"></i>
                    Coin Pop
                </a>
            </div>
            <nav class="sidebar-nav">
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="play.html" class="nav-link">
                    <i class="fas fa-play-circle"></i>
                    <span>Play</span>
                </a>
                <a href="leaderboard.html" class="nav-link active">
                    <i class="fas fa-trophy"></i>
                    <span>Leaderboard</span>
                </a>
                <a href="rewards.html" class="nav-link">
                    <i class="fas fa-gift"></i>
                    <span>Daily Rewards</span>
                </a>
                <a href="withdraw.html" id="withdraw-nav-link" class="nav-link">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>Withdraw</span>
                </a>
                <a href="settings.html" class="nav-link">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <a href="contact.html" class="nav-link">
                    <i class="fas fa-envelope"></i>
                    <span>Contact Us</span>
                </a>
                <a href="admin.html" id="admin-nav-link" class="nav-link" style="display: none;">
                    <i class="fas fa-user-shield"></i>
                    <span>Admin</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <div id="user-email-display" class="text-sm truncate mb-2">user@example.com</div>
                <button id="logout-btn" class="logout-btn w-full bg-white text-primary py-2 px-4 rounded-md font-medium hover:bg-gray-100 transition-colors">
                    Sign Out
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="main-content flex-1 flex flex-col overflow-hidden">
            <header class="content-header">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">Leaderboard</h2>
                    <p class="text-gray-600">See how you rank against other players</p>
                </div>
                <div class="flex items-center space-x-4">
                    <div id="coin-balance-display" class="coin-balance-display bg-primary text-white py-2 px-4 rounded-md font-medium">
                        <i class="fas fa-coins mr-2"></i>
                        Coins: 0
                    </div>
                </div>
            </header>

            <main class="flex-1 overflow-auto p-6">
                <!-- Hero Section -->
                <div class="leaderboard-hero relative z-10">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                        <div class="mb-4 md:mb-0">
                            <h1 class="text-3xl font-bold mb-2">Global Leaderboard</h1>
                            <p class="text-blue-100">Compete with players worldwide and climb to the top!</p>
                        </div>
                        <div class="bg-white bg-opacity-20 p-4 rounded-lg">
                            <p class="text-sm">Your Rank</p>
                            <div class="flex items-center mt-2">
                                <span id="user-rank" class="text-2xl font-bold mr-2">--</span>
                                <span class="text-sm">out of <span id="total-players">--</span> players</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Overview -->
                <div class="stats-grid">
                    <div class="stat-card primary">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-sm opacity-80">Top Player</p>
                                <h3 id="top-player-name" class="text-xl font-bold mt-1">--</h3>
                            </div>
                            <i class="fas fa-crown text-xl opacity-80"></i>
                        </div>
                        <p id="top-player-coins" class="text-sm mt-2 opacity-80">-- coins</p>
                    </div>
                    <div class="stat-card success">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-sm opacity-80">Your Position</p>
                                <h3 id="user-position" class="text-xl font-bold mt-1">--</h3>
                            </div>
                            <i class="fas fa-user text-xl opacity-80"></i>
                        </div>
                        <p id="user-coins" class="text-sm mt-2 opacity-80">-- coins</p>
                    </div>
                    <div class="stat-card warning">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-sm opacity-80">Players Online</p>
                                <h3 id="online-players" class="text-xl font-bold mt-1">--</h3>
                            </div>
                            <i class="fas fa-users text-xl opacity-80"></i>
                        </div>
                        <p class="text-sm mt-2 opacity-80">Active now</p>
                    </div>
                </div>

                <!-- Filters -->
                <div class="card p-4 mb-6">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                        <div class="search-box flex-1">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" id="search-input" class="search-input" placeholder="Search players...">
                        </div>
                        <div class="time-filter">
                            <button class="time-filter-btn active" data-period="all">All Time</button>
                            <button class="time-filter-btn" data-period="weekly">This Week</button>
                            <button class="time-filter-btn" data-period="daily">Today</button>
                        </div>
                    </div>
                </div>

                <!-- Leaderboard -->
                <div class="card overflow-hidden">
                    <div class="p-4 bg-gray-50 border-b">
                        <h3 class="font-semibold text-gray-700">Top Players</h3>
                    </div>
                    <div id="leaderboard-body" class="divide-y divide-gray-200">
                        <!-- Leaderboard items will be populated by JavaScript -->
                        <div class="px-6 py-12 text-center text-gray-500">
                            <i class="fas fa-trophy text-4xl mb-4 text-gray-300"></i>
                            <p>Loading leaderboard...</p>
                        </div>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="flex justify-between items-center mt-6">
                    <button id="prev-page" class="btn bg-gray-200 text-gray-700 hover:bg-gray-300" disabled>
                        <i class="fas fa-chevron-left mr-2"></i>
                        Previous
                    </button>
                    <span id="page-info" class="text-gray-600">Page 1 of 1</span>
                    <button id="next-page" class="btn bg-gray-200 text-gray-700 hover:bg-gray-300" disabled>
                        Next
                        <i class="fas fa-chevron-right ml-2"></i>
                    </button>
                </div>
            </main>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            document.getElementById('mobile-menu-btn').addEventListener('click', function() {
                document.querySelector('.sidebar').classList.toggle('active');
            });

            // Load user data
            const currentUserEmail = localStorage.getItem('currentUser');
            if (!currentUserEmail) {
                window.location.href = 'index.html';
                return;
            }

            const userData = JSON.parse(localStorage.getItem(`user_${currentUserEmail}`));
            if (!userData) {
                window.location.href = 'index.html';
                return;
            }

            // Update UI with user data
            document.getElementById('user-email-display').textContent = currentUserEmail;
            document.getElementById('coin-balance-display').textContent = `Coins: ${userData.coins}`;

            // Show admin link if user is admin
            if (userData.isAdmin) {
                document.getElementById('admin-nav-link').style.display = 'flex';
            }

            // Generate sample leaderboard data
            function generateLeaderboardData() {
                const names = [
                    'Alex Johnson', 'Maria Garcia', 'James Smith', 'Sarah Williams', 
                    'Robert Brown', 'Lisa Jones', 'Michael Davis', 'Jennifer Miller',
                    'William Wilson', 'Linda Taylor', 'David Anderson', 'Elizabeth Thomas',
                    'Richard Jackson', 'Susan White', 'Joseph Harris', 'Jessica Martin',
                    'Thomas Thompson', 'Karen Garcia', 'Charles Martinez', 'Nancy Robinson'
                ];
                
                const leaderboard = [];
                
                // Add current user
                leaderboard.push({
                    name: userData.name || currentUserEmail.split('@')[0],
                    email: currentUserEmail,
                    coins: userData.coins,
                    isCurrentUser: true
                });
                
                // Add other players
                for (let i = 0; i < 19; i++) {
                    const name = names[i];
                    const email = `${name.toLowerCase().replace(' ', '.')}@example.com`;
                    const coins = Math.floor(Math.random() * 10000) + 1000;
                    
                    leaderboard.push({
                        name: name,
                        email: email,
                        coins: coins,
                        isCurrentUser: false
                    });
                }
                
                // Sort by coins (descending)
                return leaderboard.sort((a, b) => b.coins - a.coins);
            }

            // Render leaderboard
            function renderLeaderboard(leaderboardData, searchTerm = '', page = 1, itemsPerPage = 10) {
                const leaderboardBody = document.getElementById('leaderboard-body');
                const userRankElement = document.getElementById('user-rank');
                const totalPlayersElement = document.getElementById('total-players');
                const userPositionElement = document.getElementById('user-position');
                const userCoinsElement = document.getElementById('user-coins');
                const topPlayerNameElement = document.getElementById('top-player-name');
                const topPlayerCoinsElement = document.getElementById('top-player-coins');
                const onlinePlayersElement = document.getElementById('online-players');
                
                // Filter by search term
                let filteredData = leaderboardData;
                if (searchTerm) {
                    filteredData = leaderboardData.filter(player => 
                        player.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        player.email.toLowerCase().includes(searchTerm.toLowerCase())
                    );
                }
                
                // Update stats
                totalPlayersElement.textContent = filteredData.length;
                onlinePlayersElement.textContent = Math.floor(Math.random() * 50) + 10;
                
                // Find current user rank
                const currentUserIndex = filteredData.findIndex(player => player.isCurrentUser);
                if (currentUserIndex !== -1) {
                    userRankElement.textContent = `#${currentUserIndex + 1}`;
                    userPositionElement.textContent = `#${currentUserIndex + 1}`;
                    userCoinsElement.textContent = `${filteredData[currentUserIndex].coins} coins`;
                }
                
                // Update top player info
                if (filteredData.length > 0) {
                    topPlayerNameElement.textContent = filteredData[0].name;
                    topPlayerCoinsElement.textContent = `${filteredData[0].coins} coins`;
                }
                
                // Pagination
                const totalPages = Math.ceil(filteredData.length / itemsPerPage);
                const startIndex = (page - 1) * itemsPerPage;
                const endIndex = Math.min(startIndex + itemsPerPage, filteredData.length);
                const pageData = filteredData.slice(startIndex, endIndex);
                
                // Update pagination controls
                document.getElementById('page-info').textContent = `Page ${page} of ${totalPages}`;
                document.getElementById('prev-page').disabled = page <= 1;
                document.getElementById('next-page').disabled = page >= totalPages;
                
                // Clear leaderboard
                leaderboardBody.innerHTML = '';
                
                // Render leaderboard items
                if (pageData.length === 0) {
                    leaderboardBody.innerHTML = `
                        <div class="px-6 py-12 text-center text-gray-500">
                            <i class="fas fa-search text-4xl mb-4 text-gray-300"></i>
                            <p>No players found matching your search.</p>
                        </div>
                    `;
                    return;
                }
                
                pageData.forEach((player, index) => {
                    const globalIndex = startIndex + index;
                    const rank = globalIndex + 1;
                    
                    let rankClass = 'rank-other';
                    if (rank === 1) rankClass = 'rank-1';
                    else if (rank === 2) rankClass = 'rank-2';
                    else if (rank === 3) rankClass = 'rank-3';
                    
                    const leaderboardItem = document.createElement('div');
                    leaderboardItem.className = `leaderboard-item ${player.isCurrentUser ? 'current-user' : ''}`;
                    
                    leaderboardItem.innerHTML = `
                        <div class="rank-badge ${rankClass}">
                            ${rank}
                        </div>
                        <div class="player-info">
                            <div class="player-avatar">
                                ${player.name.charAt(0).toUpperCase()}
                            </div>
                            <div>
                                <div class="player-name">${player.name}</div>
                                <div class="player-email">${player.email}</div>
                            </div>
                        </div>
                        <div class="coins-count">
                            <i class="fas fa-coins coins-icon"></i>
                            ${player.coins.toLocaleString()}
                        </div>
                    `;
                    
                    leaderboardBody.appendChild(leaderboardItem);
                });
            }

            // Initialize leaderboard
            const leaderboardData = generateLeaderboardData();
            renderLeaderboard(leaderboardData);
            
            // Search functionality
            let currentPage = 1;
            const searchInput = document.getElementById('search-input');
            searchInput.addEventListener('input', function() {
                currentPage = 1;
                renderLeaderboard(leaderboardData, this.value, currentPage);
            });
            
            // Time filter functionality
            document.querySelectorAll('.time-filter-btn').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.time-filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // In a real app, you would filter data by time period
                    // For now, we'll just show a notification
                    const period = this.getAttribute('data-period');
                    alert(`Filtering by ${period} data. In a real app, this would update the leaderboard.`);
                });
            });
            
            // Pagination functionality
            document.getElementById('prev-page').addEventListener('click', function() {
                if (currentPage > 1) {
                    currentPage--;
                    renderLeaderboard(leaderboardData, searchInput.value, currentPage);
                }
            });
            
            document.getElementById('next-page').addEventListener('click', function() {
                const totalPages = Math.ceil(leaderboardData.length / 10);
                if (currentPage < totalPages) {
                    currentPage++;
                    renderLeaderboard(leaderboardData, searchInput.value, currentPage);
                }
            });
            
            // Logout functionality
            document.getElementById('logout-btn').addEventListener('click', function() {
                if (confirm('Are you sure you want to sign out?')) {
                    localStorage.removeItem('currentUser');
                    window.location.href = 'index.html';
                }
            });
        });
    </script>
</body>
</html>
