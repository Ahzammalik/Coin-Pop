<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play - Coin Pop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --dark: #1f2937;
        }

        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }

        /* Sidebar Styling (Same as Settings) */
        .sidebar {
            background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white; width: 280px; transition: all 0.3s ease;
            z-index: 100;
        }

        .nav-link {
            display: flex; align-items: center; padding: 0.75rem 1.5rem;
            color: rgba(255, 255, 255, 0.8); transition: all 0.2s ease;
            border-left: 4px solid transparent;
        }

        .nav-link:hover, .nav-link.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: white; border-left-color: white;
        }

        /* Game Area Styling */
        #game-container {
            width: 100%;
            height: 500px;
            background: radial-gradient(circle, #ffffff 0%, #e5e7eb 100%);
            border: 4px solid #fff;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
            border-radius: 1.5rem;
            cursor: crosshair;
        }

        .coin {
            position: absolute;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #fbbf24 0%, #f59e0b 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2), inset 0 -4px 0 rgba(0,0,0,0.1);
            cursor: pointer;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            user-select: none;
        }

        .coin i { pointer-events: none; }

        @keyframes popIn {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        .pop-effect {
            position: absolute;
            color: #f59e0b;
            font-weight: 800;
            pointer-events: none;
            animation: floatUp 0.6s ease-out forwards;
        }

        @keyframes floatUp {
            to { transform: translateY(-50px); opacity: 0; }
        }

        @media (max-width: 768px) {
            .sidebar { position: fixed; height: 100%; transform: translateX(-100%); }
            .sidebar.active { transform: translateX(0); }
            .main-content { margin-left: 0; }
        }
    </style>
</head>
<body class="antialiased flex min-h-screen bg-gray-100">

    <aside class="sidebar flex flex-col hidden md:flex">
        <div class="p-6 border-bottom border-white/10">
            <a href="dashboard.html" class="text-2xl font-bold text-white flex items-center">
                <i class="fas fa-coins mr-2"></i> Coin Pop
            </a>
        </div>
        <nav class="flex-grow py-4">
            <a href="dashboard.html" class="nav-link"><i class="fas fa-home mr-3"></i> Dashboard</a>
            <a href="play.html" class="nav-link active"><i class="fas fa-play-circle mr-3"></i> Play</a>
            <a href="leaderboard.html" class="nav-link"><i class="fas fa-trophy mr-3"></i> Leaderboard</a>
            <a href="rewards.html" class="nav-link"><i class="fas fa-gift mr-3"></i> Rewards</a>
            <a href="withdraw.html" class="nav-link"><i class="fas fa-money-bill-wave mr-3"></i> Withdraw</a>
            <a href="settings.html" class="nav-link"><i class="fas fa-cog mr-3"></i> Settings</a>
        </nav>
        <div class="p-6 border-t border-white/10">
            <button class="w-full bg-white text-indigo-600 py-2 rounded-lg font-bold">Sign Out</button>
        </div>
    </aside>

    <div class="main-content flex-1 flex flex-col min-w-0">
        <header class="bg-white p-6 shadow-sm flex justify-between items-center">
            <div>
                <h2 class="text-2xl font-bold text-gray-800">Play & Earn</h2>
                <p class="text-gray-500 text-sm">Pop the coins to increase your balance</p>
            </div>
            <div id="score-badge" class="bg-indigo-600 text-white px-6 py-2 rounded-full font-bold shadow-lg">
                <i class="fas fa-coins mr-2"></i> Coins: <span id="coin-count">0</span>
            </div>
        </header>

        <main class="p-6 max-w-5xl mx-auto w-full">
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-white p-4 rounded-xl shadow-sm border-b-4 border-green-500">
                    <p class="text-gray-500 text-xs uppercase font-bold">Session High</p>
                    <p class="text-2xl font-black text-gray-800" id="high-score">0</p>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm border-b-4 border-blue-500">
                    <p class="text-gray-500 text-xs uppercase font-bold">Speed</p>
                    <p class="text-2xl font-black text-gray-800" id="speed-level">1.0x</p>
                </div>
            </div>

            <div id="game-container" class="relative">
                <div id="start-overlay" class="absolute inset-0 bg-indigo-900/80 z-20 flex flex-col items-center justify-center text-white rounded-xl">
                    <i class="fas fa-play-circle text-7xl mb-4 animate-bounce"></i>
                    <h3 class="text-3xl font-black mb-2">Ready to Pop?</h3>
                    <p class="mb-6 opacity-80">Each coin is worth 1 point</p>
                    <button onclick="startGame()" class="bg-white text-indigo-600 px-10 py-3 rounded-full font-bold text-xl hover:scale-105 transition-transform">
                        START GAME
                    </button>
                </div>
            </div>

            <div class="mt-6 text-center">
                <p class="text-gray-400 text-sm"><i class="fas fa-info-circle mr-1"></i> Coins are automatically saved to your wallet every 10 pops.</p>
            </div>
        </main>
    </div>

    <script>
        let score = 0;
        let highScore = 0;
        let gameActive = false;
        const container = document.getElementById('game-container');
        const coinCountDisplay = document.getElementById('coin-count');
        const highScoreDisplay = document.getElementById('high-score');

        function startGame() {
            gameActive = true;
            score = 0;
            coinCountDisplay.innerText = score;
            document.getElementById('start-overlay').style.display = 'none';
            spawnCoin();
        }

        function spawnCoin() {
            if (!gameActive) return;

            const coin = document.createElement('div');
            coin.className = 'coin';
            
            // Random Position
            const x = Math.random() * (container.offsetWidth - 80);
            const y = Math.random() * (container.offsetHeight - 80);
            
            coin.style.left = x + 'px';
            coin.style.top = y + 'px';
            coin.innerHTML = '<i class="fas fa-dollar-sign"></i>';

            // Click Event
            coin.onclick = (e) => {
                popCoin(coin, e.clientX, e.clientY);
            };

            container.appendChild(coin);

            // Auto-remove if not clicked (increases difficulty)
            setTimeout(() => {
                if (coin.parentNode) {
                    coin.remove();
                    spawnCoin();
                }
            }, 1500);
        }

        function popCoin(coin, x, y) {
            score++;
            coinCountDisplay.innerText = score;
            
            if (score > highScore) {
                highScore = score;
                highScoreDisplay.innerText = highScore;
            }

            // Pop Effect
            const effect = document.createElement('div');
            effect.className = 'pop-effect';
            effect.innerText = '+1';
            effect.style.left = (x - container.offsetLeft) + 'px';
            effect.style.top = (y - container.offsetTop) + 'px';
            container.appendChild(effect);
            
            setTimeout(() => effect.remove(), 600);
            
            coin.remove();
            spawnCoin(); // Spawn next coin immediately on click
        }

        // Sidebar Toggle for Mobile (Basic)
        document.addEventListener('keydown', (e) => {
            if(e.key === "Escape") gameActive = false;
        });
    </script>
</body>
</html>
