<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Withdraw - Coin Pop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-slate-50">
    <main class="main-content flex items-center justify-center min-h-screen" style="margin-left:0;">
        <div class="bg-white p-10 rounded-[2.5rem] shadow-xl w-full max-w-md border">
            <h2 class="text-3xl font-black text-slate-800 mb-6">Withdraw Coins</h2>
            <div class="mb-6 p-4 bg-indigo-50 rounded-2xl border border-indigo-100">
                <p class="text-indigo-600 text-sm font-bold uppercase">Current Balance</p>
                <h3 class="text-3xl font-black text-indigo-700" id="bal">0</h3>
            </div>

            <div class="space-y-4">
                <select id="method" class="w-full p-4 bg-slate-50 border rounded-2xl font-bold">
                    <option>JazzCash</option>
                    <option>EasyPaisa</option>
                    <option>Bank Transfer</option>
                </select>
                <input type="text" id="acc-num" placeholder="Account Number" class="w-full p-4 bg-slate-50 border rounded-2xl font-bold">
                <input type="number" id="amount" placeholder="Amount (Min 1000)" class="w-full p-4 bg-slate-50 border rounded-2xl font-bold">
                
                <button onclick="requestWithdraw()" class="w-full bg-green-500 text-white py-5 rounded-2xl font-black text-xl shadow-lg hover:bg-green-600 transition">
                    SUBMIT REQUEST
                </button>
            </div>
        </div>
    </main>

    <script>
        let user = JSON.parse(localStorage.getItem('currentUser'));
        document.getElementById('bal').innerText = user.coins;

        function requestWithdraw() {
            const amt = document.getElementById('amount').value;
            if(amt < 1000) { alert("Minimum withdraw is 1000 coins"); return; }
            if(user.coins < amt) { alert("Insufficient Balance"); return; }

            // Store request for Admin
            let requests = JSON.parse(localStorage.getItem('withdraw_requests')) || [];
            requests.push({
                email: user.email,
                amount: amt,
                method: document.getElementById('method').value,
                account: document.getElementById('acc-num').value,
                status: 'Pending',
                date: new Date().toLocaleDateString()
            });
            
            localStorage.setItem('withdraw_requests', JSON.stringify(requests));
            
            user.coins -= amt;
            localStorage.setItem('currentUser', JSON.stringify(user));
            alert("Withdrawal request submitted!");
            window.location.href = 'dashboard.html';
        }
    </script>
</body>
</html>
<aside class="sidebar">
    <div class="px-8 py-6 mb-4">
        <h1 class="text-white font-black text-2xl italic tracking-tighter">COIN POP</h1>
    </div>
    
    <nav class="flex-grow">
        <a href="dashboard.html" class="nav-link"><i class="fas fa-th-large"></i> Dashboard</a>
        <a href="play.html" class="nav-link"><i class="fas fa-gamepad"></i> Play Games</a>
        <a href="spin.html" class="nav-link"><i class="fas fa-dharmachakra"></i> Lucky Spin</a>
        <a href="rewards.html" class="nav-link"><i class="fas fa-gift"></i> Daily Rewards</a>
        
        <div class="my-4 border-t border-slate-700 mx-6"></div> <a href="leaderboard.html" class="nav-link"><i class="fas fa-trophy"></i> Leaderboard</a>
        <a href="withdraw.html" class="nav-link"><i class="fas fa-wallet"></i> Withdraw</a>
        <a href="history.html" class="nav-link"><i class="fas fa-history"></i> History</a>
        
        <div class="my-4 border-t border-slate-700 mx-6"></div> <a href="profile.html" class="nav-link"><i class="fas fa-user-circle"></i> My Profile</a>
        <a href="settings.html" class="nav-link"><i class="fas fa-cog"></i> Settings</a>
        <a href="contact.html" class="nav-link"><i class="fas fa-headset"></i> Contact Us</a>
    </nav>

    <div class="px-6 mt-auto">
        <a href="index.html" class="nav-link text-red-400"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>
</aside>
