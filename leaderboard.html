<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard - Coin Pop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google AdMob SDK -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-app-pub-4313544696010088"
    crossorigin="anonymous"></script>
    
    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --secondary: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1f2937;
            --light: #f9fafb;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background-color: #f3f4f6;
            color: #1f2937;
        }
        
        .sidebar {
            background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            width: 280px;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        
        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-nav {
            padding: 1rem 0;
            flex-grow: 1;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            padding: 0.75rem 1.5rem;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.2s ease;
            border-left: 4px solid transparent;
        }
        
        .nav-link:hover, .nav-link.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border-left-color: white;
        }
        
        .nav-link svg {
            margin-right: 0.75rem;
            width: 1.25rem;
            height: 1.25rem;
        }
        
        .sidebar-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .content-header {
            background-color: white;
            padding: 1.5rem 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: between;
            align-items: center;
        }
        
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            padding: 1.5rem;
            border-radius: 0.75rem;
            color: white;
            display: flex;
            flex-direction: column;
        }
        
        .stat-card.primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        }
        
        .stat-card.success {
            background: linear-gradient(135deg, var(--secondary) 0%, #059669 100%);
        }
        
        .stat-card.warning {
            background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%);
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .badge-success {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .badge-warning {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .badge-danger {
            background-color: #fee2e2;
            color: #991b1b;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            outline: none;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #e5e7eb;
            margin-bottom: 1.5rem;
            overflow-x: auto;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            font-weight: 500;
            color: #6b7280;
            white-space: nowrap;
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .leaderboard-hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 2rem;
            border-radius: 1rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .leaderboard-hero::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }
        
        .leaderboard-hero::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 150px;
            height: 150px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(-30%, 30%);
        }
        
        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            transition: all 0.2s ease;
        }
        
        .leaderboard-item:hover {
            background-color: #f9fafb;
        }
        
        .leaderboard-item.current-user {
            background-color: rgba(79, 70, 229, 0.05);
            border-left: 4px solid var(--primary);
        }
        
        .rank-badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 1rem;
            flex-shrink: 0;
        }
        
        .rank-1 {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #92400e;
        }
        
        .rank-2 {
            background: linear-gradient(135deg, #C0C0C0 0%, #A0A0A0 100%);
            color: #374151;
        }
        
        .rank-3 {
            background: linear-gradient(135deg, #CD7F32 0%, #A66D29 100%);
            color: #7c2d12;
        }
        
        .rank-other {
            background-color: #f3f4f6;
            color: #6b7280;
        }
        
        .player-info {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .player-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            margin-right: 1rem;
        }
        
        .player-name {
            font-weight: 600;
            color: #1f2937;
        }
        
        .player-email {
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .coins-count {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.125rem;
        }
        
        .coins-icon {
            color: #f59e0b;
            margin-right: 0.5rem;
        }
        
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .search-box {
            position: relative;
            margin-bottom: 1.5rem;
        }
        
        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: all 0.2s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        
        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
        }
        
        .time-filter {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .time-filter-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
        }
        
        .time-filter-btn.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1100;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background-color: var(--secondary);
        }
        
        .notification.error {
            background-color: var(--danger);
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 8px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .podium {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .podium-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.5rem;
            border-radius: 0.75rem;
            background: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .podium-1 {
            order: 2;
            transform: scale(1.1);
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
        }
        
        .podium-2 {
            order: 1;
            background: linear-gradient(135deg, #C0C0C0 0%, #A0A0A0 100%);
            color: white;
        }
        
        .podium-3 {
            order: 3;
            background: linear-gradient(135deg, #CD7F32 0%, #A66D29 100%);
            color: white;
        }
        
        .podium-rank {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .podium-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .podium-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .podium-coins {
            font-size: 0.875rem;
            opacity: 0.9;
        }
        
        .refresh-btn {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 1.25rem;
            transition: transform 0.3s ease;
        }
        
        .refresh-btn:hover {
            transform: rotate(180deg);
        }
        
        .refresh-btn.loading {
            animation: spin 1s ease-in-out infinite;
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: #6b7280;
        }
        
        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        /* AdMob Styles for Leaderboard */
        .ad-container {
            margin: 1.5rem 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 90px;
        }
        
        .admob-banner {
            width: 100%;
            height: 100px;
            margin: 1rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .admob-native {
            width: 100%;
            min-height: 300px;
            margin: 1.5rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            position: relative;
            overflow: hidden;
        }
        
        .admob-interstitial {
            width: 100%;
            min-height: 400px;
            margin: 1rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            position: relative;
        }
        
        .ad-label {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            z-index: 10;
        }
        
        .ad-loading {
            background: linear-gradient(90deg, #e5e7eb 25%, #f3f4f6 50%, #e5e7eb 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            font-size: 0.875rem;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .ad-performance {
            position: absolute;
            bottom: 5px;
            left: 5px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7rem;
            display: none; /* Hide in production */
        }
        
        .ad-close-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.75rem;
            z-index: 10;
        }
        
        .ad-supported-text {
            text-align: center;
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.5rem;
        }
        
        .watch-ad-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: fixed;
                height: 100%;
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .mobile-menu-btn {
                display: flex;
            }
            
            .content-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .leaderboard-item {
                padding: 1rem;
            }
            
            .player-email {
                display: none;
            }
            
            .podium {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .podium-item {
                transform: none !important;
                order: unset !important;
            }
            
            .admob-banner {
                height: 80px;
            }
            
            .admob-native {
                min-height: 250px;
            }
            
            .admob-interstitial {
                min-height: 300px;
            }
        }
    </style>
</head>
<body class="antialiased flex flex-col min-h-screen bg-gray-100">
    <div id="app-container" class="w-full flex-grow flex">
        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="mobile-menu-btn">
            <i class="fas fa-bars"></i>
        </button>

        <!-- Sidebar -->
        <aside class="sidebar flex flex-col">
            <div class="sidebar-header">
                <a href="dashboard.html" class="text-2xl font-bold text-white flex items-center">
                    <i class="fas fa-coins mr-2"></i>
                    Coin Pop
                </a>
            </div>
            <nav class="sidebar-nav">
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="play.html" class="nav-link">
                    <i class="fas fa-play-circle"></i>
                    <span>Play</span>
                </a>
                <a href="leaderboard.html" class="nav-link active">
                    <i class="fas fa-trophy"></i>
                    <span>Leaderboard</span>
                </a>
                <a href="rewards.html" class="nav-link">
                    <i class="fas fa-gift"></i>
                    <span>Daily Rewards</span>
                </a>
                <a href="withdraw.html" id="withdraw-nav-link" class="nav-link">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>Withdraw</span>
                </a>
                <a href="settings.html" class="nav-link">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
                <a href="contact.html" class="nav-link">
                    <i class="fas fa-envelope"></i>
                    <span>Contact Us</span>
                </a>
                <a href="admin.html" id="admin-nav-link" class="nav-link" style="display: none;">
                    <i class="fas fa-user-shield"></i>
                    <span>Admin</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <div id="user-email-display" class="text-sm truncate mb-2">user@example.com</div>
                <button id="logout-btn" class="logout-btn w-full bg-white text-primary py-2 px-4 rounded-md font-medium hover:bg-gray-100 transition-colors">
                    Sign Out
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="main-content flex-1 flex flex-col overflow-hidden">
            <header class="content-header">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">Leaderboard</h2>
                    <p class="text-gray-600">See how you rank against other players</p>
                </div>
                <div class="flex items-center space-x-4">
                    <div id="coin-balance-display" class="coin-balance-display bg-primary text-white py-2 px-4 rounded-md font-medium">
                        <i class="fas fa-coins mr-2"></i>
                        Coins: 0
                    </div>
                </div>
            </header>

            <main class="flex-1 overflow-auto p-6">
                <!-- Banner Ad - Top of Content -->
                <div class="admob-banner" id="banner-ad-top">
                    <div class="ad-label">Ad</div>
                    <div class="ad-loading" style="width: 100%; height: 100%;">
                        Loading Advertisement...
                    </div>
                </div>

                <!-- Hero Section -->
                <div class="leaderboard-hero relative z-10">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                        <div class="mb-4 md:mb-0">
                            <h1 class="text-3xl font-bold mb-2">Global Leaderboard</h1>
                            <p class="text-blue-100">Compete with players worldwide and climb to the top!</p>
                        </div>
                        <div class="bg-white bg-opacity-20 p-4 rounded-lg">
                            <p class="text-sm">Your Rank</p>
                            <div class="flex items-center mt-2">
                                <span id="user-rank" class="text-2xl font-bold mr-2">--</span>
                                <span class="text-sm">out of <span id="total-players">--</span> players</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Overview -->
                <div class="stats-grid">
                    <div class="stat-card primary">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-sm opacity-80">Top Player</p>
                                <h3 id="top-player-name" class="text-xl font-bold mt-1">--</h3>
                            </div>
                            <i class="fas fa-crown text-xl opacity-80"></i>
                        </div>
                        <p id="top-player-coins" class="text-sm mt-2 opacity-80">-- coins</p>
                    </div>
                    <div class="stat-card success">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-sm opacity-80">Your Position</p>
                                <h3 id="user-position" class="text-xl font-bold mt-1">--</h3>
                            </div>
                            <i class="fas fa-user text-xl opacity-80"></i>
                        </div>
                        <p id="user-coins" class="text-sm mt-2 opacity-80">-- coins</p>
                    </div>
                    <div class="stat-card warning">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-sm opacity-80">Players Online</p>
                                <h3 id="online-players" class="text-xl font-bold mt-1">--</h3>
                            </div>
                            <i class="fas fa-users text-xl opacity-80"></i>
                        </div>
                        <p class="text-sm mt-2 opacity-80">Active now</p>
                    </div>
                </div>

                <!-- Native Ad - Between Stats and Tabs -->
                <div class="admob-native" id="native-ad-1">
                    <div class="ad-label">Ad</div>
                    <div class="ad-loading" style="width: 100%; height: 100%;">
                        Loading Native Advertisement...
                    </div>
                </div>

                <!-- Tabs for different leaderboards -->
                <div class="tabs">
                    <div class="tab active" data-tab="global">Global</div>
                    <div class="tab" data-tab="friends">Friends</div>
                    <div class="tab" data-tab="weekly">Weekly</div>
                    <div class="tab" data-tab="monthly">Monthly</div>
                </div>

                <!-- Podium for top 3 players -->
                <div class="podium" id="podium-container">
                    <!-- Podium items will be populated by JavaScript -->
                </div>

                <!-- Banner Ad - Middle of Content -->
                <div class="admob-banner" id="banner-ad-middle">
                    <div class="ad-label">Ad</div>
                    <div class="ad-loading" style="width: 100%; height: 100%;">
                        Loading Advertisement...
                    </div>
                </div>

                <!-- Watch Ad Section -->
                <div class="watch-ad-section">
                    <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                        <div class="text-center md:text-left">
                            <h3 class="font-bold text-lg text-gray-800 mb-2">Want to Climb Faster?</h3>
                            <p class="text-gray-600">Watch an ad to earn bonus coins and improve your ranking!</p>
                        </div>
                        <button id="watch-ad-for-coins" class="btn btn-primary whitespace-nowrap">
                            <i class="fas fa-ad mr-2"></i>
                            Watch Ad for 50 Coins
                        </button>
                    </div>
                </div>

                <!-- Filters -->
                <div class="card p-4 mb-6">
                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                        <div class="search-box flex-1">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" id="search-input" class="search-input" placeholder="Search players...">
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="time-filter">
                                <button class="time-filter-btn active" data-period="all">All Time</button>
                                <button class="time-filter-btn" data-period="weekly">This Week</button>
                                <button class="time-filter-btn" data-period="daily">Today</button>
                            </div>
                            <button id="refresh-leaderboard" class="refresh-btn" title="Refresh leaderboard">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Leaderboard -->
                <div class="card overflow-hidden">
                    <div class="p-4 bg-gray-50 border-b flex justify-between items-center">
                        <h3 class="font-semibold text-gray-700">Top Players</h3>
                        <div class="text-sm text-gray-500">
                            Showing <span id="showing-count">0</span> of <span id="total-count">0</span> players
                        </div>
                    </div>
                    <div id="leaderboard-body" class="divide-y divide-gray-200 max-h-96 overflow-y-auto">
                        <!-- Leaderboard items will be populated by JavaScript -->
                        <div class="px-6 py-12 text-center text-gray-500">
                            <i class="fas fa-trophy text-4xl mb-4 text-gray-300"></i>
                            <p>Loading leaderboard...</p>
                        </div>
                    </div>
                </div>

                <!-- Native Ad - After Leaderboard -->
                <div class="admob-native" id="native-ad-2">
                    <div class="ad-label">Ad</div>
                    <div class="ad-loading" style="width: 100%; height: 100%;">
                        Loading Native Advertisement...
                    </div>
                </div>

                <!-- Pagination -->
                <div class="flex justify-between items-center mt-6">
                    <button id="prev-page" class="btn bg-gray-200 text-gray-700 hover:bg-gray-300" disabled>
                        <i class="fas fa-chevron-left mr-2"></i>
                        Previous
                    </button>
                    <span id="page-info" class="text-gray-600">Page 1 of 1</span>
                    <button id="next-page" class="btn bg-gray-200 text-gray-700 hover:bg-gray-300" disabled>
                        Next
                        <i class="fas fa-chevron-right ml-2"></i>
                    </button>
                </div>

                <!-- Banner Ad - Bottom of Content -->
                <div class="admob-banner" id="banner-ad-bottom">
                    <div class="ad-label">Ad</div>
                    <div class="ad-loading" style="width: 100%; height: 100%;">
                        Loading Advertisement...
                    </div>
                </div>

                <!-- Ad Supported Text -->
                <div class="ad-supported-text">
                    <p>Free app supported by advertisements</p>
                </div>
            </main>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text">Operation completed successfully</span>
    </div>

    <!-- Interstitial Ad Container (Hidden) -->
    <div id="interstitial-ad-container" style="display: none;">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-app-pub-4313544696010088"
             data-ad-slot="3524196741"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
    </div>

    <script>
        // AdMob Configuration
        const ADMOB_CONFIG = {
            banner: 'ca-app-pub-4313544696010088/7463441754',
            interstitial: 'ca-app-pub-4313544696010088/3524196741',
            native: 'ca-app-pub-4313544696010088/8580882616'
        };

        // Ad Manager for Leaderboard
        class LeaderboardAdManager {
            constructor() {
                this.adCounters = {
                    impressions: 0,
                    clicks: 0
                };
                this.initialized = false;
            }

            initialize() {
                if (this.initialized) return;
                
                console.log('Initializing AdMob ads for leaderboard...');
                
                // Initialize all ad units
                this.loadBannerAd('banner-ad-top');
                this.loadBannerAd('banner-ad-middle');
                this.loadBannerAd('banner-ad-bottom');
                this.loadNativeAd('native-ad-1');
                this.loadNativeAd('native-ad-2');
                
                this.setupAdEventListeners();
                this.initialized = true;
                
                console.log('Leaderboard AdMob ads initialized successfully');
            }

            loadBannerAd(containerId) {
                const container = document.getElementById(containerId);
                if (!container) return;

                setTimeout(() => {
                    container.innerHTML = `
                        <ins class="adsbygoogle"
                             style="display:block"
                             data-ad-client="ca-app-pub-4313544696010088"
                             data-ad-slot="${ADMOB_CONFIG.banner}"
                             data-ad-format="auto"
                             data-full-width-responsive="true"></ins>
                        <div class="ad-performance">Banner Ad</div>
                    `;
                    (adsbygoogle = window.adsbygoogle || []).push({});
                    this.trackImpression('banner');
                }, 1000);
            }

            loadNativeAd(containerId) {
                const container = document.getElementById(containerId);
                if (!container) return;

                setTimeout(() => {
                    container.innerHTML = `
                        <ins class="adsbygoogle"
                             style="display:block"
                             data-ad-format="fluid"
                             data-ad-layout-key="-fb+5w+4e-db+86"
                             data-ad-client="ca-app-pub-4313544696010088"
                             data-ad-slot="${ADMOB_CONFIG.native}"></ins>
                        <div class="ad-performance">Native Ad</div>
                    `;
                    (adsbygoogle = window.adsbygoogle || []).push({});
                    this.trackImpression('native');
                }, 1500);
            }

            showRewardedAd() {
                return new Promise((resolve) => {
                    console.log('Showing rewarded ad for leaderboard...');
                    
                    // Create rewarded ad modal
                    const rewardedContainer = document.createElement('div');
                    rewardedContainer.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0,0,0,0.9);
                        z-index: 9999;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                    `;
                    
                    rewardedContainer.innerHTML = `
                        <div style="background: white; padding: 2rem; border-radius: 1rem; text-align: center; max-width: 90%;">
                            <h3 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem;">Rewarded Ad</h3>
                            <div class="ad-loading" style="width: 300px; height: 250px; margin: 1rem auto;">
                                Loading Rewarded Ad...
                            </div>
                            <p style="margin: 1rem 0; color: #666;">Watch this ad to earn 50 coins and climb the leaderboard!</p>
                            <div style="display: flex; gap: 1rem; justify-content: center;">
                                <button id="complete-rewarded" style="background: #10b981; color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.5rem; cursor: pointer;">
                                    Complete Ad
                                </button>
                                <button id="close-rewarded" style="background: #6b7280; color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.5rem; cursor: pointer;">
                                    Skip
                                </button>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(rewardedContainer);
                    
                    let adCompleted = false;
                    
                    // Complete button functionality
                    document.getElementById('complete-rewarded').addEventListener('click', () => {
                        adCompleted = true;
                        this.trackImpression('rewarded');
                        document.body.removeChild(rewardedContainer);
                        resolve(true);
                    });
                    
                    // Close button functionality
                    document.getElementById('close-rewarded').addEventListener('click', () => {
                        document.body.removeChild(rewardedContainer);
                        resolve(adCompleted);
                    });
                });
            }

            setupAdEventListeners() {
                // Track ad clicks
                document.addEventListener('click', (e) => {
                    if (e.target.closest('.adsbygoogle')) {
                        this.trackClick();
                    }
                });
            }

            trackImpression(type) {
                this.adCounters.impressions++;
                console.log(`Ad Impression: ${type} - Total: ${this.adCounters.impressions}`);
            }

            trackClick() {
                this.adCounters.clicks++;
                console.log(`Ad Click - Total: ${this.adCounters.clicks}`);
            }

            getStats() {
                return this.adCounters;
            }
        }

        // Initialize Ad Manager
        const leaderboardAdManager = new LeaderboardAdManager();

        document.addEventListener('DOMContentLoaded', function() {
            // Initialize ads
            leaderboardAdManager.initialize();

            // Mobile menu toggle
            document.getElementById('mobile-menu-btn').addEventListener('click', function() {
                document.querySelector('.sidebar').classList.toggle('active');
            });

            // Load user data
            const currentUserEmail = localStorage.getItem('currentUser');
            if (!currentUserEmail) {
                // Create demo user data if none exists
                const demoUser = {
                    name: 'Demo User',
                    email: 'demo@example.com',
                    coins: 1500,
                    isAdmin: false
                };
                localStorage.setItem('currentUser', demoUser.email);
                localStorage.setItem(`user_${demoUser.email}`, JSON.stringify(demoUser));
                window.location.reload();
                return;
            }

            const userData = JSON.parse(localStorage.getItem(`user_${currentUserEmail}`));
            if (!userData) {
                // Create demo user data if none exists
                const demoUser = {
                    name: 'Demo User',
                    email: currentUserEmail,
                    coins: 1500,
                    isAdmin: false
                };
                localStorage.setItem(`user_${currentUserEmail}`, JSON.stringify(demoUser));
                window.location.reload();
                return;
            }

            // Update UI with user data
            document.getElementById('user-email-display').textContent = currentUserEmail;
            document.getElementById('coin-balance-display').textContent = `Coins: ${userData.coins}`;

            // Show admin link if user is admin
            if (userData.isAdmin) {
                document.getElementById('admin-nav-link').style.display = 'flex';
            }

            // Generate sample leaderboard data
            function generateLeaderboardData() {
                const names = [
                    'Alex Johnson', 'Maria Garcia', 'James Smith', 'Sarah Williams', 
                    'Robert Brown', 'Lisa Jones', 'Michael Davis', 'Jennifer Miller',
                    'William Wilson', 'Linda Taylor', 'David Anderson', 'Elizabeth Thomas',
                    'Richard Jackson', 'Susan White', 'Joseph Harris', 'Jessica Martin',
                    'Thomas Thompson', 'Karen Garcia', 'Charles Martinez', 'Nancy Robinson'
                ];
                
                const leaderboard = [];
                
                // Add current user
                leaderboard.push({
                    name: userData.name || currentUserEmail.split('@')[0],
                    email: currentUserEmail,
                    coins: userData.coins,
                    isCurrentUser: true
                });
                
                // Add other players
                for (let i = 0; i < 19; i++) {
                    const name = names[i];
                    const email = `${name.toLowerCase().replace(' ', '.')}@example.com`;
                    const coins = Math.floor(Math.random() * 10000) + 1000;
                    
                    leaderboard.push({
                        name: name,
                        email: email,
                        coins: coins,
                        isCurrentUser: false
                    });
                }
                
                // Sort by coins (descending)
                return leaderboard.sort((a, b) => b.coins - a.coins);
            }

            // Show notification
            function showNotification(message, type = 'success') {
                const notification = document.getElementById('notification');
                const notificationText = document.getElementById('notification-text');
                
                notificationText.textContent = message;
                notification.className = `notification ${type} show`;
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }

            // Render podium for top 3 players
            function renderPodium(leaderboardData) {
                const podiumContainer = document.getElementById('podium-container');
                const topThree = leaderboardData.slice(0, 3);
                
                if (topThree.length === 0) {
                    podiumContainer.innerHTML = '';
                    return;
                }
                
                let podiumHTML = '';
                
                topThree.forEach((player, index) => {
                    const rank = index + 1;
                    const podiumClass = `podium-${rank}`;
                    
                    podiumHTML += `
                        <div class="podium-item ${podiumClass}">
                            <div class="podium-rank">#${rank}</div>
                            <div class="podium-avatar">
                                ${player.name.charAt(0).toUpperCase()}
                            </div>
                            <div class="podium-name">${player.name}</div>
                            <div class="podium-coins">${player.coins.toLocaleString()} coins</div>
                        </div>
                    `;
                });
                
                podiumContainer.innerHTML = podiumHTML;
            }

            // Render leaderboard
            function renderLeaderboard(leaderboardData, searchTerm = '', page = 1, itemsPerPage = 10) {
                const leaderboardBody = document.getElementById('leaderboard-body');
                const userRankElement = document.getElementById('user-rank');
                const totalPlayersElement = document.getElementById('total-players');
                const userPositionElement = document.getElementById('user-position');
                const userCoinsElement = document.getElementById('user-coins');
                const topPlayerNameElement = document.getElementById('top-player-name');
                const topPlayerCoinsElement = document.getElementById('top-player-coins');
                const onlinePlayersElement = document.getElementById('online-players');
                const showingCountElement = document.getElementById('showing-count');
                const totalCountElement = document.getElementById('total-count');
                
                // Filter by search term
                let filteredData = leaderboardData;
                if (searchTerm) {
                    filteredData = leaderboardData.filter(player => 
                        player.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        player.email.toLowerCase().includes(searchTerm.toLowerCase())
                    );
                }
                
                // Update stats
                totalPlayersElement.textContent = filteredData.length;
                totalCountElement.textContent = filteredData.length;
                onlinePlayersElement.textContent = Math.floor(Math.random() * 50) + 10;
                
                // Find current user rank
                const currentUserIndex = filteredData.findIndex(player => player.isCurrentUser);
                if (currentUserIndex !== -1) {
                    userRankElement.textContent = `#${currentUserIndex + 1}`;
                    userPositionElement.textContent = `#${currentUserIndex + 1}`;
                    userCoinsElement.textContent = `${filteredData[currentUserIndex].coins} coins`;
                }
                
                // Update top player info
                if (filteredData.length > 0) {
                    topPlayerNameElement.textContent = filteredData[0].name;
                    topPlayerCoinsElement.textContent = `${filteredData[0].coins} coins`;
                }
                
                // Render podium for top 3
                renderPodium(filteredData);
                
                // Pagination
                const totalPages = Math.ceil(filteredData.length / itemsPerPage);
                const startIndex = (page - 1) * itemsPerPage;
                const endIndex = Math.min(startIndex + itemsPerPage, filteredData.length);
                const pageData = filteredData.slice(startIndex, endIndex);
                
                // Update pagination controls
                document.getElementById('page-info').textContent = `Page ${page} of ${totalPages}`;
                document.getElementById('prev-page').disabled = page <= 1;
                document.getElementById('next-page').disabled = page >= totalPages;
                showingCountElement.textContent = pageData.length;
                
                // Clear leaderboard
                leaderboardBody.innerHTML = '';
                
                // Render leaderboard items
                if (pageData.length === 0) {
                    leaderboardBody.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <h3 class="text-lg font-semibold mb-2">No players found</h3>
                            <p class="text-gray-600">Try adjusting your search or filter</p>
                        </div>
                    `;
                    return;
                }
                
                pageData.forEach((player, index) => {
                    const globalIndex = startIndex + index;
                    const rank = globalIndex + 1;
                    
                    let rankClass = 'rank-other';
                    if (rank === 1) rankClass = 'rank-1';
                    else if (rank === 2) rankClass = 'rank-2';
                    else if (rank === 3) rankClass = 'rank-3';
                    
                    const leaderboardItem = document.createElement('div');
                    leaderboardItem.className = `leaderboard-item ${player.isCurrentUser ? 'current-user' : ''}`;
                    
                    leaderboardItem.innerHTML = `
                        <div class="rank-badge ${rankClass}">
                            ${rank}
                        </div>
                        <div class="player-info">
                            <div class="player-avatar">
                                ${player.name.charAt(0).toUpperCase()}
                            </div>
                            <div>
                                <div class="player-name">${player.name}</div>
                                <div class="player-email">${player.email}</div>
                            </div>
                        </div>
                        <div class="coins-count">
                            <i class="fas fa-coins coins-icon"></i>
                            ${player.coins.toLocaleString()}
                        </div>
                    `;
                    
                    leaderboardBody.appendChild(leaderboardItem);
                });
            }

            // Initialize leaderboard
            let leaderboardData = generateLeaderboardData();
            let currentPage = 1;
            const searchInput = document.getElementById('search-input');
            
            renderLeaderboard(leaderboardData);
            
            // Search functionality
            searchInput.addEventListener('input', function() {
                currentPage = 1;
                renderLeaderboard(leaderboardData, this.value, currentPage);
            });
            
            // Time filter functionality
            document.querySelectorAll('.time-filter-btn').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.time-filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // In a real app, you would filter data by time period
                    // For now, we'll just show a notification
                    const period = this.getAttribute('data-period');
                    showNotification(`Showing ${period} leaderboard`, 'success');
                });
            });
            
            // Tab functionality
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    const tabName = this.getAttribute('data-tab');
                    showNotification(`Showing ${tabName} leaderboard`, 'success');
                    
                    // In a real app, you would load different leaderboard data
                    // For now, we'll just use the same data
                    currentPage = 1;
                    renderLeaderboard(leaderboardData, searchInput.value, currentPage);
                });
            });
            
            // Refresh leaderboard functionality
            document.getElementById('refresh-leaderboard').addEventListener('click', function() {
                const btn = this;
                const originalIcon = btn.innerHTML;
                
                btn.classList.add('loading');
                btn.disabled = true;
                
                // Simulate API call
                setTimeout(() => {
                    // Generate new data with some randomness
                    leaderboardData = generateLeaderboardData();
                    renderLeaderboard(leaderboardData, searchInput.value, currentPage);
                    
                    btn.classList.remove('loading');
                    btn.innerHTML = originalIcon;
                    btn.disabled = false;
                    
                    showNotification('Leaderboard updated', 'success');
                }, 1500);
            });
            
            // Pagination functionality
            document.getElementById('prev-page').addEventListener('click', function() {
                if (currentPage > 1) {
                    currentPage--;
                    renderLeaderboard(leaderboardData, searchInput.value, currentPage);
                    
                    // Scroll to top of leaderboard
                    document.getElementById('leaderboard-body').scrollTop = 0;
                }
            });
            
            document.getElementById('next-page').addEventListener('click', function() {
                const totalPages = Math.ceil(leaderboardData.length / 10);
                if (currentPage < totalPages) {
                    currentPage++;
                    renderLeaderboard(leaderboardData, searchInput.value, currentPage);
                    
                    // Scroll to top of leaderboard
                    document.getElementById('leaderboard-body').scrollTop = 0;
                }
            });
            
            // Watch Ad for Coins functionality
            document.getElementById('watch-ad-for-coins').addEventListener('click', async function() {
                const btn = this;
                const originalText = btn.innerHTML;
                
                btn.innerHTML = '<span class="loading-spinner"></span> Loading...';
                btn.disabled = true;
                
                try {
                    const adCompleted = await leaderboardAdManager.showRewardedAd();
                    if (adCompleted) {
                        // Add coins to user
                        userData.coins += 50;
                        localStorage.setItem(`user_${currentUserEmail}`, JSON.stringify(userData));
                        
                        // Update UI
                        document.getElementById('coin-balance-display').textContent = `Coins: ${userData.coins}`;
                        
                        showNotification('+50 coins earned! Your leaderboard position may improve.', 'success');
                        
                        // Refresh leaderboard to show updated position
                        setTimeout(() => {
                            leaderboardData = generateLeaderboardData();
                            renderLeaderboard(leaderboardData, searchInput.value, currentPage);
                        }, 1000);
                    } else {
                        showNotification('Ad was skipped', 'error');
                    }
                } catch (error) {
                    console.error('Rewarded ad error:', error);
                    showNotification('Rewarded ad failed to load', 'error');
                } finally {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                }
            });
            
            // Logout functionality
            document.getElementById('logout-btn').addEventListener('click', function() {
                if (confirm('Are you sure you want to sign out?')) {
                    localStorage.removeItem('currentUser');
                    window.location.href = 'index.html';
                }
            });

            // Ad performance monitoring
            setInterval(() => {
                const stats = leaderboardAdManager.getStats();
                console.log('Leaderboard Ad Performance Stats:', stats);
            }, 30000);
        });
    </script>
</body>
</html>
